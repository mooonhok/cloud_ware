<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<link rel="icon" href="head.ico" type="image/x-icon"/>
		<title>保单详情页面</title>

		<script type="text/javascript" src="js/config.js"></script>
		<script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
		<style>
			*{
				margin:0;
				padding:0;
			}
			.title{
				width:100%;
				height:40px;
				line-height: 40px;
				text-align:center;
				font-size:24px;
				background-color: rgb(18,151,219);
				color:white;
			}
			.send{
				width:1000px;
				margin:0 auto;
				height:80px;
				border-style:double;
			}
			.sendname{
				width:50%;
				height:40px;
				text-align:left;
				line-height:40px;
				float:left;

			}
			.sendtel{
				width:48%;
				text-align: left;
				height: 40px;
				line-height: 40px;
				float:left;
			}
			.sendaddress{
				width:99%;
				height: 40px;
				line-height: 40px;
			    text-align: left;
			    float: left;
			}
			.receive{
				width:1000px;
				margin:0 auto;
				height:80px;
				border-style:double;
			}
			.receivename{
				width:50%;
				height:40px;
				text-align:left;
				line-height:40px;
				float:left;

			}
			.receivetel{
				width:48%;
				text-align: left;
				height: 40px;
				line-height: 40px;
				float:left;
			}
			.receiveaddress{
				width:99%;
				height: 40px;
				line-height: 40px;
			    text-align: left;
			    float: left;
			}
			.lorry{
				width:1000px;
				margin:0 auto;
				height:80px;
				border-style:double;
			}
			.lorryname{
				width:50%;
				height:40px;
				text-align:left;
				line-height:40px;
				float:left;

			}
			.lorrytel{
				width:48%;
				text-align: left;
				height: 40px;
				line-height: 40px;
				float:left;
			}
			.platenumber{
				width:50%;
				height:40px;
				text-align:left;
				line-height:40px;
				float:left;
			}
			.sendtime{
				width:48%;
				text-align: left;
				height: 40px;
				line-height: 40px;
				float:left;
			}
			.orders{
				width:1000px;
				margin:0 auto;
				border-style:double;
				text-align: center;
			}
			.ordertile{
				width:1000px;
				margin:0 auto;
				text-align:left;
				height:40px;
				line-height:40px;
				font-size:24px;
			}
			table {
				margin:0 auto;
				border-right: 1px solid #DDDDDD;
				border-bottom: 1px solid #DDDDDD;
				/*text-align:center;*/
			}
			
			table td {
				border-left: 1px solid #DDDDDD;
				border-top: 1px solid #DDDDDD;
				height: 40px;
				text-align:center;
			}
			
			table thead tr th {
				height: 40px;
				line-height: 40px;
				/*text-align: center;*/
				border-left: 1px solid #DDDDDD;
				border-top: 1px solid #DDDDDD;
				/* background: #9CBA60; */
			}
			.print{
				width:1000px;
				margin:0 auto;
			}
		</style>
	</head>
	<body>
		<div class="title">货物详情</div>
		<!--<div class="send">-->
			<!--<div class="sendname">清单发货公司：</div>-->
			<!--<div class="sendtel">清单公司电话：</div>-->
			<!--<div class="sendaddress">清单发货地址：</div>-->
		<!--</div>-->
		<!--<div class="receive">-->
			<!--<div class="receivename">清单收货人姓名：</div>-->
			<!--<div class="receivetel">清单收货人电话：</div>-->
			<!--<div class="receiveaddress">清单收货人地址：</div>-->
		<!--</div>-->
		<!--<div class="lorry">-->
			<!--<div class="lorryname">司机姓名：</div>-->
			<!--<div class="lorrytel">司机电话：</div>-->
			<!--<div class="platenumber">车牌号：</div>-->
			<!--<div class="sendtime">货物出发时间：</div>-->
		<!--</div>-->
		<div class="orders">
			<div class="ordertile">起运时间：</div>
			<table id="tables" width="800" border="1px" cellspacing="0" cellpadding="0">
					<thead>
					<tr>
						<th colspan="3" id="scheduling_id">清单号：</th>
						<th colspan="2" id="fa_zhan">发站</th>
						<th colspan="2" id="dao_zhan">到站</th>
					</tr>
						<tr style="background-color:rgb(18,151,219);">
							<th>运单编号</th>
							<th>货物名称</th>
							<th>件数/件</th>
							<th>体积/㎥</th>
							<th>重量/吨</th>
							<th>包装</th>
							<th>价值</th>
						</tr>
					</thead>
				</table>
		</div>
	    <div class="print"><input type="button" value="打印本页" onclick="printpage()" style="float: right;"/></div>
	</body>
	<script>
        function printpage()
        {
            window.print()
        }
		(function($) {
			$.getUrlParam = function(name) {
				var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
				var r = window.location.search.substr(1).match(reg);
				if(r != null) return decodeURI(r[2]);
				return null;
			}
		})(jQuery);
		    var scheduling_id=$.getUrlParam('scheduling_id');
 //           var scheduling_id="QD5230001000007";
			$.ajax({
//				url: p_url+"adminall.php/dbadmin?sch_id="+scheduling_id,
                url:"http://api.uminfor.cn/adminall.php/dbadmin1?sch_id="+scheduling_id,
				dataType: 'json',
				type: 'get',
				ContentType: "application/json;charset=utf-8",
				data: JSON.stringify({
				}),
				success: function(msg) {
				   if(msg.result == 0) {
//                      $(".title").append(scheduling_id);
//                      $(".sendname").append(msg.schedules.company);
//                      $(".sendtel").append(msg.schedules.contant_tel);
//                      $(".sendaddress").append(msg.schedules.send_city+msg.schedules.address);
//                      $(".receivename").append(msg.schedules.customer_name);
//                      $(".receivetel").append(msg.schedules.customer_phone);
//                      $(".receiveaddress").append(msg.schedules.receive_city+msg.schedules.customer_address);
//                      $(".lorryname").append(msg.schedules.driver_name);
//                      $(".lorrytel").append(msg.schedules.driver_phone);
//                      $(".platenumber").append(msg.schedules.plate_number);
//                      $(".sendtime").append(msg.schedules.scheduling_datetime);

					   $('.ordertile').text('起运时间：'+msg.schedules.transtime);
					   $("#scheduling_id").text('清单号：'+scheduling_id);
                       $("#fa_zhan").text('发站：'+msg.schedules.send_city);
                       $("#dao_zhan").text('到站：'+msg.schedules.receive_city);
                      for(var i=0;i<msg.schedules.schedule_orders.length;i++){
                      	$("#tables").append("<tr><td>"+msg.schedules.schedule_orders[i].order_id
                      	+"</td><td>"+msg.schedules.schedule_orders[i].goods_name
                      	+"</td><td>"+msg.schedules.schedule_orders[i].goods_count
                      	+"</td><td>"+msg.schedules.schedule_orders[i].goods_weight
                      	+"</td><td>"+msg.schedules.schedule_orders[i].goods_capacity
                      	+"</td><td>"+msg.schedules.schedule_orders[i].goods_package
                      	+"</td><td>"+msg.schedules.schedule_orders[i].goods_value
                      	+"</td></tr>");
                      }
				  }else{
				  	alert(msg.desc);
				  }
				},
				error: function(xhr) {
					alert("获取后台失败");
				}
			});
	</script>
</html>
