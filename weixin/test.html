<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd";>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width,height=device-height,inital-scale=1.0,maximum-scale=1.0,user-scalable=no;">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="format-detection" content="telephone=no">

<title>会员注册</title>
<script type="text/javascript" src="jquery-3.2.1.min.js"></script>
<script type="text/javascript">

 function callback(result) {  
		alert('cucess');  
		alert(result);  //输出openid
	}  
	alert("方法getquery");
function getQueryString(name) {
	var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
	var r = window.location.search.substr(1).match(reg);
	if (r != null) return unescape(r[2]); return null;
	}
alert("ajax");

var code = getQueryString("code");
    alert(code);
$.ajax({ 
	  async: false, 
	  url: "http://mooonhok-cloudware.daoapp.io/test02.php", //这是我的服务端处理文件php的
	  type: "GET", 
	  //下面几行是jsoup，如果去掉下面几行的注释，后端对应的返回结果也要去掉注释
	  // dataType: 'jsonp', 
	  // jsonp: 'callback', //jsonp的值自定义,如果使用jsoncallback,那么服务器端,要返回一个jsoncallback的值对应的对象. 
	  // jsonpCallback:'callback',
	  data: {code:code}, //传递本页面获取的code到后台，以便后台获取openid
	  timeout: 5000, 
	  success: function (result) { 
	  	alert(result)
		callback(result);
	  }, 
	  error: function (jqXHR, textStatus, errorThrown) { 
		  alert(textStatus); 
	  } 
  });


</script>
</head>
<body>
</body>
