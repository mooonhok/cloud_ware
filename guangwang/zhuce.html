<!DOCTYPE html>
<html>

	<head>

		<head>
			<meta charset="UTF-8">
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
			<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
			<meta http-equiv="Access-Control-Allow-Origin" content="*">
			<link rel="icon" href="head.ico" type="image/x-icon" />
			<title>用户注册</title>
			<script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
			<script type="text/javascript" src="js/jquery.session.js"></script>
			<style>
				* {
					margin: 0;
					padding: 0;
				}
				
				.top {
					width: 100%;
					height: 50px;
					background-color: #019ed5;
				}
				
				.top1 {
					width: 100px;
					height: 50px;
					line-height: 50px;
					text-align: center;
					float: right;
					color: white;
				}
				
				.center {
					width: 60%;
					margin-top: 20px;
					margin-left: 20%;
					height:1500px;
				}
				
				.ctitle {
					height: 50px;
					line-height: 50px;
					width: 60%;
					margin-left: 20%;
					text-align: center;
					font-size: 20px;
				}
				
				.center1 {
					height: 40px;
					width: 80%;
					line-height: 40px;
					margin-left: 10%;
					text-align: center;
					margin-top: 10px;
				}
				
				.center1_1 {
					width: 120px;
					height: 30px;
					line-height: 30px;
					float: left;
				}
				
				.center1 input {
					outline-style: none;
					border-bottom: 0.5px solid;
					border-top: none;
					border-right: none;
					border-left: none;
					background: none;
					display: inline-block;
					height: 30px;
					line-height: 30px;
					width: 70%;
					float: left;
				}
				
				.center2 {
					height: 40px;
					width: 80%;
					line-height: 40px;
					margin-left: 10%;
					text-align: center;
					margin-top: 10px;
				}
				
				.center2 input {
					outline-style: none;
					border-top: none;
					border-right: none;
					border-left: none;
					background: none;
					display: inline-block;
					height: 30px;
					line-height: 30px;
					width: 70%;
					float: left;
				}
				
				.center3 {
					height: 40px;
					width: 80%;
					line-height: 40px;
					margin-left: 10%;
					text-align: center;
					margin-top: 10px;
				}
				
				.center3_1 {
					width: 120px;
					height: 30px;
					line-height: 30px;
					float: left;
				}
				
				.center3_2 {
					height: 30px;
					line-height: 30px;
					width: 70%;
					float: left;
				}
				
				.center3_2 select {
					width: 40%;
					margin-left: 8%;
					height: 30px;
					line-height: 30px;
				}
				
				.center4 {
					height: 40px;
					width: 80%;
					line-height: 40px;
					margin-left: 10%;
					text-align: center;
					margin-top: 10px;
				}
				
				.center4 input {
					height: 30px;
					line-height: 30px;
					width: 50%;
					float: left;
					margin-left: 10%;
				}
				
				.center5 {
					height: 40px;
					width: 80%;
					line-height: 40px;
					margin-left: 10%;
					text-align: center;
					margin-top: 10px;
				}
				
				#showl {
					height: 30px;
					line-height: 30px;
					float: left;
					width: 20%;
					margin-left: 5%;
				}
				
				#loca {
					height: 30px;
					line-height: 30px;
					width: 32%;
					margin-left: 1%;
					float: left;
					outline-style: none;
					border-bottom: 0.5px solid;
					border-top: none;
					border-right: none;
					border-left: none;
					background: none;
					display: inline-block;
				}
				
				.center6 {
					height: 150px;
					width: 80%;
					line-height: 40px;
					margin-left: 10%;
					text-align: center;
					margin-top: 10px;
				}
				
				.center6 textarea {
					outline-style: none;
					height: 120px;
					width: 70%;
					line-height: 20px;
					float: left;
					border-radius: 10px;
					border: 1px solid;
				}
				.tijiao{
					width:60%;
					height:40px;
					margin-left:20%;
					margin-top:30px;
					border-radius: 10px;
					background:rgb(1,158,213);
					font-size:20px;
				}
				.calender-wrap {
					-webkit-animation: clafade .3s ease;
					-moz-animation: clafade .3s ease;
					animation: clafade .3s ease;
					padding: 5px;
					background: #fff;
					width: 240px;
					box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
					border-radius: 4px;
					position: relative;
					font-family: "Microsoft yahei";
					position: absolute;
					z-index: 1000
				}
				
				.calender-wrap {
					border: 1px solid #e2e2e2
				}
				
				.calender-wrap:after {
					content: '';
					display: inline-block;
					border-left: 7px solid transparent;
					border-right: 7px solid transparent;
					border-bottom: 7px solid #eee;
					border-top: 0;
					border-bottom-color: #d7d7d7;
					position: absolute;
					left: 9px;
					top: -7px
				}
				
				.calender-wrap:before {
					content: '';
					display: inline-block;
					border-left: 6px solid transparent;
					border-right: 6px solid transparent;
					border-bottom: 6px solid #ffffff;
					border-top: 0;
					position: absolute;
					left: 10px;
					top: -6px;
					z-index: 10
				}
				
				.calender-caption {
					height: 35px;
					border-bottom: 1px solid #ddd;
					z-index: 2;
					background: #eee
				}
				
				.calender-content {
					position: relative;
					overflow: hidden
				}
				
				.calender-content:after {
					content: '';
					display: block;
					clear: both
				}
				
				.calender-cell {
					cursor: pointer;
					float: left;
					width: 14.28571428%;
					height: 35px;
					text-align: center;
					line-height: 35px;
					font-size: 12px;
					color: #000;
					z-index: 1;
					border-bottom: 1px solid #eee
				}
				
				.calender-cell:hover {
					background: #eee
				}
				
				.calender-caption .calender-cell:hover {
					background: none
				}
				
				.calender-cell-dark {
					cursor: no-drop;
					color: #b9b9b9
				}
				
				.calender-caption .calender-cell {
					height: 35px;
					line-height: 35px;
					font-size: 13px;
					color: #111;
					font-weight: bold
				}
				
				.calender-header {
					text-align: center;
					line-height: 35px;
					text-align: center;
					color: #888;
					padding-bottom: 4px;
					margin-bottom: 1px;
					background: #fff;
					position: relative;
					border-bottom: 1px solid #e6e6e6;
					font-size: 14px
				}
				
				#calender-prev,
				#calender-next {
					text-decoration: none;
					display: block;
					width: 14.2857%;
					height: 35px;
					background: #fff;
					position: absolute;
					left: 0%;
					top: 0px;
					font-family: '宋体';
					font-size: 14px;
					color: #555
				}
				
				#calender-prev,
				#calender-next {
					color: #999;
					font-size: 16px
				}
				
				#calender-prev:hover,
				#calender-next:hover {
					background: #eee;
					border-radius: 5px;
					color: #222
				}
				
				#calender-next {
					left: auto;
					right: 0%
				}
				
				#calender-year,
				#calender-mon {
					cursor: pointer;
					padding: 2px 4px;
					border-radius: 3px;
					margin: 0 3px;
				}
				
				#calender-year:hover,
				#calender-mon:hover {
					background: #eee
				}
				
				.calender-list {
					overflow: hidden
				}
				
				.calender-list2,
				.calender-list3 {
					display: none
				}
				
				.calender-year-cell,
				.calender-mon-cell {
					width: 32.41%;
					float: left;
					border-radius: 4px;
					text-align: center;
					font-size: 12px;
					padding: 15px 0;
					border: 1px solid #fff
				}
				
				.calender-year-cell:hover,
				.calender-mon-cell:hover {
					background: #eee;
					cursor: pointer
				}
				
				.calender-cell.active,
				.calender-year-cell.active,
				.calender-mon-cell.active {
					background: #23acf1;
					color: #fff
				}
				
				.calender-cell.active:hover,
				.calender-year-cell.active:hover,
				.calender-mon-cell.active:hover {
					background: #23acf1;
					color: #fff
				}
				
				.calender-button {
					border-top: 1px solid #eee;
					width: 100%;
					margin-top: -1px;
					padding: 7px 0px 2px 0;
					overflow: hidden
				}
				
				.calender-button a {
					display: block;
					text-align: center;
					padding: 0px 15px;
					height: 25px;
					line-height: 25px;
					float: right;
					background: #23acf1;
					color: #fff;
					margin-right: 5px;
					cursor: pointer;
					margin-left: 5px;
					font-size: 12px;
					text-decoration: none
				}
				
				.calender-button a:hover {
					background: #0084c9
				}
				
				.calender-wrap.year .calender-list,
				.calender-wrap.month .calender-list {
					display: none
				}
				
				.calender-wrap.year .calender-list2 {
					display: block
				}
				
				.calender-wrap.month .calender-list3 {
					display: block
				}
			</style>
		</head>

		<body>
			<div class="top">
				<div class="top1">返回首页</div>
			</div>
			<div class="center">
				<form id="myform" action="http://api.uminfo.cn/tenant.php/tenant" enctype="multipart/form-data" onsubmit="return check()" method="post" autocomplete="off">
					<div class="ctitle">客户基本信息</div>
					<div class="center1">
						<div class="center1_1">公 司 名 称:</div><input type="text" name="company" placeholder="必填项"></div>
					<div class="center1">
						<div class="center1_1">公司对外简称:</div><input type="text" name="jcompany" placeholder="必填项"></div>
					<div class="center1">
						<div class="center1_1">营业执照号码：</div><input type="text" name="business_l" placeholder="必填项"></div>
					<div class="center2">
						<div class="center1_1">营业照图片：</div><input type="file" name="file1" accept="image/gif,image/jpeg,image/jpg,image/png,image/svg" /></div>
					<div class="center1">
						<div class="center1_1">负责人姓名：</div><input type="text" name="contact_name" placeholder="必填项"></div>
					<div class="center1">
						<div class="center1_1">负责人电话：</div><input type="text" name="telephone" id="phone" placeholder="必填项"></div>
					<div class="center1">
						<div class="center1_1">电子邮箱：</div><input type="text" name="email" id="email"></div>
					<div class="center1">
						<div class="center1_1">QQ：</div><input type="text" name="qq" id="qq"></div>
					<div class="center3">
						<div class="center3_1">发货城市：</div>
						<div class="center3_2">
							<select name="province" id="province1" onchange="getPro1()">
								<option value="">请选择</option>
							</select>
							<select name="from_city_id" id="city1">
								<option value="">请选择</option>
							</select>
						</div>
					</div>
					<div class="center3">
						<div class="center3_1">收货城市：</div>
						<div class="center3_2">
							<select name="province" id="province2" onchange="getPro2()">
								<option value="">请选择</option>
							</select>
							<select name="receive_city_id" id="city2">
								<option value="">请选择</option>
							</select>
						</div>
					</div>
					<div class="center1">
						<div class="center1_1">详 细 地 址：</div><input type="text" id="loc3" name="address" placeholder="必填项"></div>
					<div class="center4">
						<div class="center1_1">开始使用时间:</div><input type="text" id="inp" placeholder="选择日期" name="begin_time"></div>
					<div class="center4">
						<div class="center1_1">结束使用时间:</div><input type="text" id="inp2" placeholder="选择日期" name="end_time"></div>
					<div class="center5">
						<div class="center1_1">填写坐标：</div>
						<input type="text" id="loca" name="loca" placeholder="必填项">
						<input id="showl" type="button" value="拾取公司地理坐标">
					</div>
					<div class="center2">
						<div class="center1_1">运单模版：</div>
						<input type="file" value="上传文件" name="order_t_p">
					</div>
					<div class="center2">
						<div class="center1_1">运输合同模版：</div>
						<input type="file" value="上传文件" name="trans_contract_p">
					</div>
					<div class="center6">
						<div class="center1_1">服务项目：</div>
						<textarea class="text1" name="service_items"></textarea>
					</div>
					<div class="center6">
						<div class="center1_1">公司介绍：</div>
						<textarea class="text1" name="c_introduction"></textarea>
					</div>
					<input name="sales_id" style="display: none;" id="userid">
			        <input class="tijiao" type="submit" value="提     交">
			</div>
			</form>
			</div>

			<script type="text/javascript" src="js/canvas-nest.js"></script>
			<script type="text/javascript" color="255,0,0" opacity="0.5" count="200" src="canvas-nest.js"></script>
			<script src="http://www.itakeo.com/down/calender2.js"></script>
			<script type="text/javascript">
				(function($) {
					$.getUrlParam = function(name) {
						var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
						var r = window.location.search.substr(1).match(reg);
						if(r != null) return decodeURI(r[2]);
						return null;
					}
				})(jQuery);
				var desc = $.getUrlParam('desc');
				if(desc != null && desc != '') {
					alert(desc);
					if(desc == '企业登记成功') {
						window.location.href = 'http://www.uminfo.cn/yindex.html';
					}
				}
				$(".center").on("click", function() {
					$(".calender-wrap ").css("display", "none");
				});
				$("#showl").on("click", function() {
					window.open("http://api.map.baidu.com/lbsapi/getpoint/index.html");

				});
				$("#nsure").on("click", function() {
					$("#fromdata").css("display", "block");
					$("#boxloc").css("display", "none");
				});
				$("#sure").on("click", function() {
					$("#fromdata").css("display", "block");
					$("#loca").val($("#loc2").val());
					$("#boxloc").css("display", "none");
				});
			</script>

			<script type="text/javascript">
				$(".top1").on("click", function() {
					window.location.href = "http://www.uminfo.cn/yindex.html";
				});
				$("#phone").on('change', function() {
					var phone = $("#phone").val();
					// alert(phone);
					if(!(/^((0\d{2,3}-\d{7,8})|(1[3584]\d{9}))$/.test(phone))) {
						alert('电话号码格式不对');
					}
				})
			</script>
			<script type="text/javascript">
				$("#email").on("change", function() {
					var email = $("#email").val();
					if(!/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(email) || !/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(email)) {
						alert("邮箱格式错误")
					}
				})
			</script>
			<script type="text/javascript">
				$("#qq").on("change", function() {
					var qq = $("#qq").val();
					if(!/^\d{5,10}$/.test(qq)) {
						alert("QQ号格式错误")
					}
				})
			</script>
			<script>
				//日期判断
				(function() {
					calender('#inp').init({
						format: 'yyyy-MM-dd',
					}, function(date1) {
						this.value = date1
						calender('#inp2').init({
							format: 'yyyy-MM-dd',
						}, function(date2) {
							if(date2 < date1) {
								alert("结束日期不能小于开始日期请重新选择")
							} else {
								this.value = date2
							}
						});
					});
				})();
			</script>
			<script>
				//获取省份和城市列表1
				$.ajax({
					url: "http://api.uminfo.cn/city.php/province",
					dataType: 'json',
					type: 'get',
					ContentType: "application/json;charset=utf-8",
					data: JSON.stringify({}),
					success: function(msg) {
						for(var i = 0; i < msg.province.length; i++) {
							$("#province1").append('<option value="' + msg.province[i].id + '">' + msg.province[i].name + '</option>');
						}
					},
					error: function(e) {
						alert("省份列表1信息出错!");
					}
				});

				function getPro1() {
					$("#city1").empty();
					var pid = $("#province1 option:selected").val();
					$.ajax({
						url: "http://api.uminfo.cn/city.php/city?pid=" + pid,
						dataType: 'json',
						type: 'get',
						ContentType: "application/json;charset=utf-8",
						data: JSON.stringify({}),
						success: function(msg) {
							for(var i = 0; i < msg.city.length; i++) {
								$("#city1").append('<option value="' + msg.city[i].id + '">' + msg.city[i].name + '</option>');
							}
						},
						error: function(e) {
							$("#city1").append('<option value="">请选择市</option>');
						}
					});
				}
			</script>
			<script>
				//获取城市列表2
				$.ajax({
					url: "http://api.uminfo.cn/city.php/province",
					dataType: 'json',
					type: 'get',
					ContentType: "application/json;charset=utf-8",
					data: JSON.stringify({}),
					success: function(msg) {
						for(var i = 0; i < msg.province.length; i++) {
							$("#province2").append('<option value="' + msg.province[i].id + '">' + msg.province[i].name + '</option>');
						}
					},
					error: function(e) {
						alert("省份列表2信息出错!");
					}
				});

				function getPro2() {
					$("#city2").empty();
					var pid = $("#province2 option:selected").val();
					$.ajax({
						url: "http://api.uminfo.cn/city.php/city?pid=" + pid,
						dataType: 'json',
						type: 'get',
						ContentType: "application/json;charset=utf-8",
						data: JSON.stringify({}),
						success: function(msg) {
							for(var i = 0; i < msg.city.length; i++) {
								$("#city2").append('<option value="' + msg.city[i].id + '">' + msg.city[i].name + '</option>');
							}
						},
						error: function(e) {
							$("#city2").append('<option value="">请选择市</option>');
						}
					});
				}
			</script>
			<script>
				var userid = $.session.get('userid');
				$("#userid").val(userid);
				if(userid == null || userid == "") {
					window.location.href = "http://www.uminfo.cn/yindex.html";
				}

				function check() {
					var address = document.getElementsByName("address")[0].value;
					var begin_time = document.getElementsByName("begin_time")[0].value;
					var end_time = document.getElementsByName("end_time")[0].value;
					var business_l = document.getElementsByName("business_l")[0].value;
					var telephone = document.getElementsByName("telephone")[0].value;
					var company = document.getElementsByName("company")[0].value;
					var contact_name = document.getElementsByName("contact_name")[0].value;
					var business_l_p = document.getElementsByName("file1")[0].value;
					var c_introduction = document.getElementsByName("c_introduction")[0].value;
					var email = document.getElementsByName("email")[0].value;
					var order_t_p = document.getElementsByName("order_t_p")[0].value;
					var qq = document.getElementsByName("qq")[0].value;
					var receive_city_id = document.getElementsByName("receive_city_id")[0].value;
					var from_city_id = document.getElementsByName("from_city_id")[0].value;
					var sales_id = document.getElementsByName("sales_id")[0].value;
					var service_items = document.getElementsByName("service_items")[0].value;
					var trans_contract_p = document.getElementsByName("trans_contract_p")[0].value;
					var loca = document.getElementsByName("loca")[0].value;

					if(address == null || address == "") {
						alert("地址不能为空");
						return false;
					}
					if(begin_time == null || begin_time == "") {
						alert("开始时间不能为空");
						return false;
					}
					if(end_time == null || end_time == "") {
						alert("结束时间不能为空");
						return false;
					}
					if(business_l == null || business_l == "") {
						alert("营业执照不能为空");
						return false;
					}
					if(company == null || company == "") {
						alert("公司名称不能为空");
						return false;
					}
					if(contact_name == null || contact_name == "") {
						alert("公司联系人不能为空");
						return false;
					}
					if(business_l_p == null || business_l_p == "") {
						alert("公司营业执照照片不能为空");
						return false;
					}
					if(receive_city_id == 0 || receive_city_id == "") {
						alert("收货城市不能为空");
						return false;
					}
					if(from_city_id == 0 || from_city_id == "") {
						alert("发货城市不能为空");
						return false;
					}
					if(telephone == null || telephone == "" || !/^((0\d{2,3}-\d{7,8})|(1[3584]\d{9}))$/.test(telephone)) {
						alert("缺少公司联系人电话");
						return false;
					}
					if(!/^((0\d{2,3}-\d{7,8})|(1[3584]\d{9}))$/.test(telephone)) {
						alert("电话号码格式错误");
						return false;
					}
					if(loca == null || loca == "") {
						alert("地理坐标为空");
					}
					alert("提交成功");
					return true;
				}
			</script>

		</body>

</html>